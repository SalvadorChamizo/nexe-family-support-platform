<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üóìÔ∏è Gesti√≥n de Turnos - Nexe Family Support</title>
    <link rel="stylesheet" href="/styles.css">
    <!-- Iconos de Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navbar Superior -->
    <nav class="navbar">
        <div class="container-nav">
            <div class="nav-brand">
                <i class="fas fa-calendar-check"></i>
                <span>Nexe Turnos</span>
            </div>
            <div class="nav-stats">
                <div class="stat-badge">
                    <i class="fas fa-users"></i>
                    <span id="total-shifts">0</span> Turnos
                </div>
                <div class="stat-badge">
                    <i class="fas fa-clock"></i>
                    <span id="total-hours">0</span> Horas
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Hero Section -->
        <header class="hero">
            <div class="hero-content">
                <h1 class="hero-title">
                    <i class="fas fa-calendar-alt"></i>
                    Sistema de Gesti√≥n de Turnos
                </h1>
                <p class="hero-subtitle">
                    Organiza y administra los turnos del equipo de manera eficiente
                </p>
            </div>
            <div class="hero-actions">
                <button class="btn btn-primary btn-large" onclick="showCreateForm()">
                    <i class="fas fa-plus-circle"></i> Crear Nuevo Turno
                </button>
                <button class="btn btn-secondary btn-large" onclick="loadShifts()">
                    <i class="fas fa-sync-alt"></i> Actualizar
                </button>
            </div>
        </header>

        <!-- Mensajes de Notificaci√≥n -->
        <div id="notification" class="notification hidden">
            <i class="fas fa-check-circle"></i>
            <span id="notification-text"></span>
            <button class="notification-close" onclick="hideNotification()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Filtros R√°pidos -->
        <section class="filters-section">
            <div class="filters-header">
                <h3><i class="fas fa-filter"></i> Filtros R√°pidos</h3>
            </div>
            <div class="filters-grid">
                <div class="filter-item">
                    <label><i class="fas fa-calendar-day"></i> Fecha</label>
                    <input type="date" id="filter-date" onchange="applyFilters()">
                </div>
                <div class="filter-item">
                    <label><i class="fas fa-user-tag"></i> Rol</label>
                    <select id="filter-role" onchange="applyFilters()">
                        <option value="">Todos</option>
                        <option value="Voluntario">Voluntario</option>
                        <option value="Coordinador">Coordinador</option>
                        <option value="Supervisor">Supervisor</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label><i class="fas fa-search"></i> Buscar Usuario</label>
                    <input type="text" id="filter-user" placeholder="Nombre de usuario..." oninput="applyFilters()">
                </div>
                <div class="filter-item">
                    <button class="btn btn-clear" onclick="clearFilters()">
                        <i class="fas fa-times-circle"></i> Limpiar Filtros
                    </button>
                </div>
            </div>
        </section>

        <!-- Modal de Formulario -->
        <div id="form-modal" class="modal hidden">
            <div class="modal-overlay" onclick="hideCreateForm()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="form-title">
                        <i class="fas fa-calendar-plus"></i>
                        Crear Nuevo Turno
                    </h2>
                    <button class="modal-close" onclick="hideCreateForm()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="shift-form" class="form">
                    <input type="hidden" id="shift-id">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-user"></i> Informaci√≥n del Usuario</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user_id">
                                    <i class="fas fa-id-card"></i> ID Usuario *
                                </label>
                                <input type="text" id="user_id" required placeholder="Ej: user001">
                            </div>
                            <div class="form-group">
                                <label for="user_name">
                                    <i class="fas fa-user-circle"></i> Nombre Completo *
                                </label>
                                <input type="text" id="user_name" required placeholder="Ej: Juan P√©rez">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-calendar-check"></i> Detalles del Turno</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="date">
                                    <i class="fas fa-calendar"></i> Fecha *
                                </label>
                                <input type="date" id="date" required>
                            </div>
                            <div class="form-group">
                                <label for="role">
                                    <i class="fas fa-user-tag"></i> Rol *
                                </label>
                                <select id="role" required>
                                    <option value="">Seleccionar rol...</option>
                                    <option value="Voluntario">üë• Voluntario</option>
                                    <option value="Coordinador">‚≠ê Coordinador</option>
                                    <option value="Supervisor">üéØ Supervisor</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-clock"></i> Horario</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="start_time">
                                    <i class="fas fa-play-circle"></i> Hora Inicio *
                                </label>
                                <input type="time" id="start_time" required onchange="calculateHours()">
                            </div>
                            <div class="form-group">
                                <label for="end_time">
                                    <i class="fas fa-stop-circle"></i> Hora Fin *
                                </label>
                                <input type="time" id="end_time" required onchange="calculateHours()">
                            </div>
                            <div class="form-group">
                                <label for="hours">
                                    <i class="fas fa-hourglass-half"></i> Total Horas *
                                </label>
                                <input type="number" id="hours" min="1" max="24" required readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-comment-dots"></i> Notas Adicionales</h4>
                        <div class="form-group">
                            <label for="notes">
                                <i class="fas fa-pencil-alt"></i> Notas (Opcional)
                            </label>
                            <textarea id="notes" rows="3" placeholder="A√±ade cualquier informaci√≥n adicional..."></textarea>
                            <small class="form-hint">M√°ximo 1000 caracteres</small>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large" id="submit-btn">
                            <i class="fas fa-save"></i> Guardar Turno
                        </button>
                        <button type="button" class="btn btn-secondary btn-large" onclick="hideCreateForm()">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Lista de Turnos -->
        <section class="shifts-section">
            <div class="section-header">
                <h2>
                    <i class="fas fa-list-ul"></i>
                    Turnos Registrados
                    <span class="badge" id="shifts-count">0</span>
                </h2>
                <div class="view-toggle">
                    <button class="btn-icon active" onclick="setView('grid')" id="btn-grid">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button class="btn-icon" onclick="setView('list')" id="btn-list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>

            <!-- Loading State -->
            <div id="loading" class="loading-state">
                <div class="spinner"></div>
                <p>Cargando turnos...</p>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="empty-state hidden">
                <div class="empty-icon">
                    <i class="fas fa-calendar-times"></i>
                </div>
                <h3>No hay turnos registrados</h3>
                <p>Comienza creando tu primer turno</p>
                <button class="btn btn-primary" onclick="showCreateForm()">
                    <i class="fas fa-plus-circle"></i> Crear Primer Turno
                </button>
            </div>

            <!-- Shifts Grid/List -->
            <div id="shifts-container" class="shifts-grid"></div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container-footer">
            <p>
                <i class="fas fa-heart" style="color: #e74c3c;"></i>
                Nexe Family Support Platform - Sistema de Gesti√≥n de Turnos
            </p>
            <p class="footer-version">v1.0.0 | 2025</p>
        </div>
    </footer>

    <script src="/app.js"></script>
</body>
</html>